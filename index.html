<!DOCTYPE>
<html lang="zh-en">
<head>
    <title>ES6实现简单留言板</title>
    <meta http-equiv="content-type" content="text/html;charset=utf-8">
    <style type="text/css">
        body {
            background-size: 100% 100%;           
        }       
    </style>
    <script type="text/javascript">

        //箭头函数没有自己的this，指向的是定义时的，而不是执行时的this;
        let obj = {
            m: new Map(),       //定义一个map方法 使用到了map的数据结构
            init: function () { //对象方法名的简写
                this.bind();
            },
    
            $:function(name) {
                return document.querySelector(name);
            },       

            bind: function () {
                this.$('.submit').onclick = () => {
                    let _name = this.$(".name").value,   //获取文档中 class="name" 的第一个元素:
                        _msg = this.$(".message").value; //获取文档中 class="message" 的第一个元素:
                    if (_name == '' || _msg == '') {
                        alert('请输入信息')             //判断空值
                    } else {
                        this.m.set(_name, _msg);   //使用到了set的数据结构
                        this.$(".name").value = '';
                        this.$(".message").value = '';
                        this.list();
                    }
                }
            },
            list: function () {
                let str = '';
                //console.log(this.m)
                //Map 的迭代
                //对 Map 进行遍历，以下两个最高级。
                //for...of
                for (let [key, value] of this.m) {
                    str += `<li class="list-group-item">${key}<span>说：</span>${value}</li>`;    //模板字符串
                };
                this.$(".messageList").innerHTML = str;            
            }
        }
        window.onload = function () {
            obj.init();
        }

    </script>

</head>
<body background="https://timgsa.baidu.com/timg?image&quality=80&size=b9999_10000&sec=1568982956473&di=3f41bc9ab204231ac93f8f31721561d1&imgtype=0&src=http%3A%2F%2Fb-ssl.duitang.com%2Fuploads%2Fitem%2F201605%2F09%2F20160509215410_HPzYL.jpeg">
    <h1>人生苦短、做好事情、不求输赢、不争不抢、一切随缘，有也行，没有也行。</h1>
    <div class="container">
        <div class="form-horizontal">
            <div class="form-group">
                <label class="col-sm-1 control-label">昵称：</label>
                <div class="col-sm-11">
                    <input type="email" class="form-control name" id="inputEmail3" placeholder="请输入昵称">
                </div>
            </div>
            <div class="form-group">
                <label class="col-sm-1 control-label">留言：</label>
                <div class="col-sm-11">
                    <textarea class="form-control message" rows="10" placeholder="请输入内容"></textarea>
                </div>
            </div>
            <div class="form-group">
                <div class="col-sm-offset-1 col-sm-11">
                    <button type="submit" class="btn btn-success submit">提交留言</button>
                </div>
            </div>
        </div>

        <div class="panel panel-primary">
            <div class="panel-heading">留言列表</div>
            <div class="panel-body">
                <ul class="list-group messageList">                 
                </ul>
            </div>
        </div>
    </div>
</body>
</html>




